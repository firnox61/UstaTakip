@{
    Layout = null;
    var title = ViewData["Title"] as string ?? "UstaTakip";
}
<!DOCTYPE html>
<html lang="tr" data-theme="light">
<head>
    <meta charset="utf-8" />
    <title>@title - UstaTakip</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/app-shell.css" />
</head>
<body>

    <!-- NAVBAR -->
    @await Html.PartialAsync("_Navbar")

    <div class="app-wrap d-flex">

        <!-- OVERLAY (mobil için) -->
        <div id="sidebarOverlay" class="sidebar-overlay"></div>

        <!-- SIDEBAR -->
        @await Html.PartialAsync("_Sidebar")

        <!-- MAIN -->
        <main class="app-main flex-fill">
            <div class="container-fluid py-3">
                @await Html.PartialAsync("_Alerts")
                @RenderBody()
            </div>
        </main>

    </div>

    <!-- =============================== -->
    <!--        JAVASCRIPT KISMI         -->
    <!-- =============================== -->
    <!-- Bootstrap -->
    <!-- jQuery önce -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- jQuery Validate -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>

    <!-- Bootstrap en sonda -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Sidebar script -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            const toggleButton = document.getElementById("sidebarToggle");
            const sidebar = document.querySelector(".app-sidebar");
            const overlay = document.getElementById("sidebarOverlay");

            toggleButton.addEventListener("click", function () {

                // 🖥 MASAÜSTÜ
                if (window.innerWidth >= 992) {
                    sidebar.classList.toggle("collapsed");
                    overlay.classList.remove("active");
                }
                // 📱 MOBİL
                else {
                    sidebar.classList.toggle("mobile-open");

                    if (sidebar.classList.contains("mobile-open")) {
                        overlay.classList.add("active");
                    } else {
                        overlay.classList.remove("active");
                    }
                }
            });

            // Overlay tıklandığında sidebar kapanır
            overlay.addEventListener("click", function () {

                if (window.innerWidth < 992) {
                    sidebar.classList.remove("mobile-open");
                }

                overlay.classList.remove("active");
            });

        });
    </script>

    <!-- Tooltip -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[title]'));
            tooltipTriggerList.map(el => new bootstrap.Tooltip(el));
        });
    </script>

    <!-- Dark Mode -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            const root = document.documentElement;
            const toggleBtn = document.getElementById("themeToggle");
            const themeIcon = document.getElementById("themeIcon");

            let savedTheme = localStorage.getItem("theme") || "light";
            root.setAttribute("data-theme", savedTheme);
            updateIcon(savedTheme);

            toggleBtn.addEventListener("click", function () {
                let current = root.getAttribute("data-theme");
                let next = current === "light" ? "dark" : "light";
                root.setAttribute("data-theme", next);
                localStorage.setItem("theme", next);
                updateIcon(next);
            });

            function updateIcon(theme) {
                if (theme === "dark")
                    themeIcon.classList.replace("fa-moon", "fa-sun");
                else
                    themeIcon.classList.replace("fa-sun", "fa-moon");
            }
        });
    </script>
    <!-- GLOBAL IMAGE MODAL -->
    <div class="modal fade" id="imageModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content bg-dark text-center position-relative">

                <button type="button" class="btn btn-outline-light position-absolute top-0 end-0 m-3"
                        data-bs-dismiss="modal">
                    ×
                </button>

                <button id="prevBtn" class="btn btn-light position-absolute start-0 top-50 translate-middle-y ms-2">‹</button>

                <img id="modalImage" class="img-fluid mx-auto" style="max-height:80vh;" />

                <button id="nextBtn" class="btn btn-light position-absolute end-0 top-50 translate-middle-y me-2">›</button>
            </div>
        </div>
    </div>
    <!-- Sayfa bazlı scriptler buradan yüklenir -->
    @RenderSection("Scripts", required: false)
   


</body>
</html>
